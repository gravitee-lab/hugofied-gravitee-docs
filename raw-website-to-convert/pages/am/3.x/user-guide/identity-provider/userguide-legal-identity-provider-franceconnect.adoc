= FranceConnect
:page-sidebar: am_3_x_sidebar
:page-permalink: am/current/am_userguide_legal_identity_provider_franceconnect.html
:page-folder: am/user-guide
:page-layout: am

NOTE: New in AM 3.3.x.

NOTE: Before you begin, sign up for a link:https://partenaires.franceconnect.gouv.fr/[FranceConnect account].

image::am/current/graviteeio-am-userguide-legal-franceconnect-logo.png[]

link:https://franceconnect.gouv.fr/[FranceConnect] is the French government Identity Provider that connects million of legal accounts.
You can connect to it with credentials such as your National Insurance Number, postal address and more.

== Steps

To connect your application to FranceConnect, you will:

- Register a new application in FranceConnect
- Create a FranceConnect identity provider in AM
- Set up the connection in FranceConnect
- Test the connection

== Register a new application in FranceConnect

To connect your application to FranceConnect, you must follow all the steps described link:https://franceconnect.gouv.fr/partenaires[here].

NOTE: FranceConnect will generate a client_ID and client_secret; make a note of these for later use.

== Create a FranceConnect identity provider

You create an identity provider for each security domain.

To create an identity provider:

. Go to http://GRAVITEEIO-AM-UI-HOST.
. Click *Settings > Providers*.
. Click the *+* button.
. Select *FranceConnect* as your identity provider type and click *NEXT*.

NOTE: Ensure you have the Client ID and Client Secret generated by FranceConnect to hand.

[start=5]
. Give your identity provider a name.
. Enter your FranceConnect Client ID and Client Secret.
. Select at least the *openid* scope, which is mandatory.
. Click *Create*.

image::am/current/graviteeio-am-userguide-legal-idp-franceconnect.png[]

NOTE: Copy the URL in *1. Configure the Redirect URI* to the right of the page. You need this value to update your FranceConnect application settings in the next section.

== Set up the connection

Go to your FranceConnect application settings and and click *Add a Redirect URI*. Enter Redirect URI value you copied in the previous section.

== Test the connection

You can test your FranceConnect connection using the web applications you created in AM.

In AM Portal, click *Application > Identity Providers* and select your social identity provider.

image::am/current/graviteeio-am-userguide-social-idp-list.png[]

To test the connection, call the Login page (the `/oauth/authorize` endpoint). If your connection is successful, you will see a *Sign in with* button.

image::am/current/graviteeio-am-userguide-social-idp-login.png[]

NOTE: If you do not see the button, there may be a problem with the identity provider settings. Check the AM Gateway log for more information.

NOTE: link:https://partenaires.franceconnect.gouv.fr/faq[The frequently asked questions (FAQ)] can help you to set up your connection.
